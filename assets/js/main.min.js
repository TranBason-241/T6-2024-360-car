$(document).ready(function () {
  // fakeImg
  size = 200;
  for (let index = 0; index < size; index++) {
    var img = document.createElement("img");
    img.classList.add("img-model");
    if (index == 0) {
      img.classList.add("img-model-show");
    }
    id = index + 1;
    img.src = `https://360views.3dmodels.org/standard/VinFast/011_VinFast_VF_e35_2021/VinFast_VF_e35_2021_360_1080_200-${id}.jpg`;
    document.querySelector(".list-img-model").appendChild(img);
  }

  function RolateModel(idModel, options = {}) {
    // for (let index = 0; index < size; index++) {
    //   var img = document.createElement("img");
    //   img.classList.add("img-model");
    //   // img.classList.add("img-model-show");
    //   id = index + 1;
    //   img.src = `https://360views.3dmodels.org/standard/VinFast/011_VinFast_VF_e35_2021/VinFast_VF_e35_2021_360_1080_200-${id}.jpg`;
    //   document.querySelector(".img-model-container").appendChild(img);
    // }

    var defaultOptions = {
      interval: null,
      intervalTime: 50,
      isReverse: false,
      currentIndex: 0,
    };

    var settings = { ...defaultOptions, ...options };

    var model = document.querySelector(`#${idModel}`);
    if (!model) {
      return;
    }

    var listImage = model.querySelectorAll(".img-model-container .img-model");

    // init image
    function showImage(index) {
      // Ẩn tất cả các hình ảnh
      listImage.forEach(function (slide) {
        slide.style.display = "none";
      });
      // Hiển thị hình ảnh tại vị trí index
      listImage[index].style.display = "block";
    }

    function changeImage() {
      settings.currentIndex = (settings.currentIndex + (settings.isReverse ? -1 : 1) + listImage.length) % listImage.length;
      showImage(settings.currentIndex);
    }

    // Bắt đầu slideshow
    function startSlideshow() {
      settings.interval = setInterval(changeImage, settings.intervalTime);
    }

    //Change Speed
    function changeSpeed(speed) {
      settings.intervalTime = speed;
      console.log("change");
      console.log(settings.intervalTime);
      clearInterval(settings.interval); // Dừng interval cũ trước khi khởi động lại với tốc độ mới
      startSlideshow(); // Bắt đầu lại slideshow sau khi thay đổi tốc độ
    }

    startSlideshow();

    return {
      pause: function () {
        clearInterval(settings.interval);
      },
      start: function () {
        startSlideshow();
      },
      startSlideshow: startSlideshow,
      speed: changeSpeed,
    };
  }

  // html
  // <div class="image-car-area">
  //   <div class="model-360" id="model-1">
  //     <div class="img-model-container"></div>
  //   </div>
  // </div>;

  // model_1 = new RolateModel("model-1");

  // setTimeout(() => {
  //   model_1.speed(40);
  // }, 3000);
  // setTimeout(() => {
  //   model_1.speed(15);
  // }, 10000);

  //----------------SLIDE CHANGE IMAGE -----------------------

  changeImageSlide = (index) => {
    var listImage = document.querySelectorAll(".list-img-model .img-model");
    document.querySelector(".img-model-show").classList.remove("img-model-show");
    listImage[index].classList.add("img-model-show");
  };

  var rangeInput = document.getElementById("imageRange");
  rangeInput.oninput = function () {
    var index = this.value - 1;
    // Trừ 1 để có chỉ số mảng chính xác (0-199)
    // imgElement.src = images[index];
    console.log(index);
    changeImageSlide(index);
    showIcon(index);
  };

  //showIcon

  showIcon = (index) => {
    if (index < 10) {
      document.querySelector(".for-mark-1").classList.add("show");
    } else {
      document.querySelector(".for-mark-1").classList.remove("show");
    }
  };

  ///Click to mark

  mark_1 = document.querySelector(".mark-1");
  mark_1.addEventListener("click", () => {
    console.log(rangeInput.value);
    rangeInput.value = 0;
    const event = new Event("input");
    // Kích hoạt sự kiện change
    rangeInput.dispatchEvent(event);
  });

  mark_3 = document.querySelector(".mark-3");
  mark_3.addEventListener("click", () => {
    console.log(rangeInput.value);
    rangeInput.value = 80;
    const event = new Event("input");
    // Kích hoạt sự kiện change
    rangeInput.dispatchEvent(event);
  });

  //Click view Detail
  document.querySelector(".for-mark-1").addEventListener("click", () => {
    alert("vieww detal");
  });
});

// write function convert string to number

// write function change background when click on button has id = "haha"
